##main init dispatcher for waccOS

begin

#include "bcm2835_timer.wach"
#include "uart_w.wach"
#include "frame.wach"

extern void run_shell();
extern void ivt_init();

void kernel_main() is
    bcm2835_timer_init();
    mm_init();
    ivt_init();

    uart_write_stringN("Running kernel debug shell...");

    run_shell();
end

end
